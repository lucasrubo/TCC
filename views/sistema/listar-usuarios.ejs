<%- include('header', {titulo:'Lista de Usuários'}); %>
<%- include('menu', {variant:'sistema'}); %>

<script type="text/javascript">  
    conteudo = '<form class="w3-container" action="/sistema/att-usuario-post" method="post"><div class="w3-center"><img id="AvatarUser" alt="Avatar" style="height: 225px;width: 225px;background: lightgray;border: 1px solid lightgray;" class="w3-circle " src="../images/usuario-branco.png"><br>        <span id="statusUser" class="w3-button w3-green w3-margin-top" >Ativado</span></div><input hidden readonly type="text" id="model_id" name="model_id" required><div class="row-n"><div class="col-md-5 w3-margin-bottom"><label><b>Nome</b></label><input class="w3-input w3-border" type="text" placeholder="" id="model_name" name="model_name"></div><div class="col-md-5 w3-margin-bottom"><label><b>Usuário</b></label><input class="w3-input w3-border" type="text" placeholder="" id="model_username" name="model_username" required></div><div class="col-md-5 w3-margin-bottom"><label><b>E-mail</b></label><input class="w3-input w3-border" type="email" placeholder="" id="model_email" name="model_email" required></div><div class="col-md-5 w3-margin-bottom"><label><b>Nível</b></label><input class="w3-input w3-border" type="text" placeholder="" id="model_level" name="model_level" required></div><div class="col-md-5 w3-margin-bottom"><label><b>Atualizar</b></label><input class="w3-input w3-border" type="date" placeholder="" id="model_att_now" name="model_att_now" required></div><div class="col-md-5 w3-margin-bottom"><label><b>Ult. Atualização</b></label><input class="w3-input w3-border" readonly type="date" placeholder="" id="model_att" name="model_att" required></div></div><div class="w3-container w3-border-top w3-padding-16 w3-light-grey"><button class="w3-button w3-green" type="submit">Salvar</button><button id="closeModelCancel" type="button" class="w3-button w3-red">Cancelar</button><input  hidden readonly id="statusUsuario" name="statusUsuario" type="text"></div></form>';
</script>

<section class="layout_padding">
    <div class="custom_heading-container">
      <h3 class=" ">
        Lista de Usuários
      </h3>
    </div>
    <div class="container layout_padding2-top">
      <div class="row">
        <div class="col-md-12 mx-auto" style='overflow: auto;'> 
            <table id="tabela" class="display" style="width:100%;">
                <thead>
                    <tr>
                        <th>id</th>
                        <th>Nome</th>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Nível</th>
                        <th>Criado</th>
                        <th>Atualizado</th>
                        <th hidden >Imagem</th>
                        <th>Empresa</th>
                        <th>ativo</th>
                    </tr>
                </thead>
                <tbody id="usuario">
                    <% for(var i = 0; lista_usuarios.length>i;i++){ %>
                    <tr>
                        <td><%= lista_usuarios[i].id %></td>
                        <td><%= lista_usuarios[i].name %></td>
                        <td><%= lista_usuarios[i].username %></td>
                        <td><%= lista_usuarios[i].email %></td>
                        <td><%= lista_usuarios[i].type %></td>
                        <td>
                            <%
                                let data_criada = lista_usuarios[i].createdAt;
                                let dataFormatada_criada = ((data_criada.getDate() )) + "/" + ((data_criada.getMonth() + 1)) + "/" + data_criada.getFullYear(); 
                            %>
                            <%=  dataFormatada_criada  %>
                        </td>
                        <td>
                            <%
                                let data =lista_usuarios[i].updatedAt;
                                let dataFormatada = ((data.getDate() )) + "/" + ((data.getMonth() + 1)) + "/" + data.getFullYear(); 
                            %>
                            <%=  dataFormatada  %>
                        </td>
                        <td hidden>
                            <%= lista_usuarios[i].imagem %>
                        </td>
                        <td><%= lista_usuarios[i].empresa %></td>
                        <td><% if(lista_usuarios[i].ativo == 1){ %>Ativo<% }else{ %>Desativado<%} %></td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
      </div>

    </div>
  </section>
  
<%- include('footer',{variant:''}); %>